# 限流

针对软件系统来说，限流就是对请求的速率进行限制，避免瞬时的大量请求击垮软件系统。毕竟，软件系统的处理能力是有限的。如果说超过了其处理能力的范围，软件系统可能直接就挂掉了。

## 常见限流算法

- 一、 **漏桶算法**
   1. 往桶中以任意速率流入水，以一定速率流出水。当水超过桶流量则丢弃，因为桶容量是不变的，保证了整体的速率。
   2. 总量控制，桶大小是设计的关键
   3. 应用场景：瞬时高并发**流量**，例如0点签到，整点秒杀
- 二、 **令牌桶算法**
   1. 桶里装的是令牌，请求在被处理之前需要拿到一个令牌，请求处理完毕之后将这个令牌丢弃（删除）。我们根据限流大小，按照一定的速率往桶里添加令牌。如果桶装满了，就不能继续往里面继续添加令牌了。 
   2. 添加令牌的速率是设计的关键
   3. 应用场景：控制自己的处理**速度**，防止过载
- 三、 **滑动窗口计数器算法**
   1. 滑动窗口的格子划分的越多，滑动窗口的滚动就越平滑，限流的统计就会越精确
   2. Sentinel 是基于滑动窗口实现的
- 四、固定窗口计数器算法（这种限流算法无法保证限流速率，因而无法保证突然激增的流量，不推荐。）

## 漏桶和令牌桶算法差别及适用场景

1. 漏桶关注的量，令牌桶关注的是速率
