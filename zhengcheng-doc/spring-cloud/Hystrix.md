# Hystrix :+1:

在 SpringCloud 中断路器组件就是 Hystrix。功能是：**当对某个服务的调用在一定的时间内（默认10s），有超过一定次数（默认20次）并且失败率超过一定值（默认50%），该服务的断路器会打开。返回一个由开发者设定的fallback**。

## 隔离策略

线程池隔离（默认）、信号量隔离

- THREAD（线程池隔离）：使用该方式，HystrixCommand将**会在单独的线程上执行**，并发请求**受线程池中线程数量的限制**。
- SEMAPHORE（信号量隔离）：使用该方式，HystrixCommand将**会在调用线程上执行**，开销相对较小，并发请求**受信号量的个数的限制**。

## 熔断与降级的区别

1. 服务降级：不管在什么情况下，**服务降级的流程都是先调用正常的方法，再调用fallback的方法**。 
2. 服务熔断：假设服务宕机或者在单位时间内调用服务失败的次数过多，即服务降级的次数太多，那么则服务熔断。并且熔断以后**会跳过正常的方法**，会直接调用fallback方法，即所谓“服务熔断后不可用”。 类似于家里常见的保险丝，当达到最大服务访问后，会直接拒绝访问，拉闸限电，然后调用服务降级的fallback方法。
